<!DOCTYPE html>
<html>
  <head>
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style2.css">
    <link rel="stylesheet" href="css/intlTelInput.css">

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="google-signin-client_id" content="966551515564-s0k92khh47d526fg5kuagkf7u40fphju.apps.googleusercontent.com">
    <title>PadiEmas | Sign Up</title>
  </head>

  <body>

    <div class="parallax-container">
      <div class="parallax"><img src="img/jumbotron.jpg" class="signup responsive-img"></div>

      <!-- Navbar -->
      <div class="container signup">
        <div class="row">
          <div class="col m8">
            <nav class="transparent z-depth-0 menu">
              <div class="nav-wrapper">
                  <a href="#" class="brand-logo"><img src="img/logonav.png" alt="Logo"></a>
                  <a href="#" data-target="mobile-nav" class="sidenav-trigger"><i class="material-icons">menu</i></a>
                  <ul id="nav-mobile" class="hide-on-med-and-down">
                    <li><img src="img/logonav.png" alt="Logo"></li>
                    <li><a class="nav-item first" href="index.html">Home</a></li>
                    <li><a class="nav-item dropdown-trigger" data-target="dropdown2">Company</a></li>
                    <ul class="dropdown-content" id="dropdown2">
                      <li><a href="companyprofile.html">Profile</a></li>
                      <li><a href="companystructure.html">Structure</a></li>
                    </ul>
                    <li><a class="nav-item" href="jobs.html">Job</a></li>
                    <li><a class="nav-item" href="contact">Contact</a></li>
                    <li><a class="nav-item dropdown-trigger" data-target="dropdown3">Others</a></li>
                    <ul class="dropdown-content" id="dropdown3">
                      <li><a href="info.html">dev_info</a></li>
                      <li><a href="task.html">Assignment2_phase3</a></li>
                    </ul>
                  </ul>
              </div>
            </nav>
          </div>
          <div class="row center">
            <section id="button_nav" class="">
              <div class="col m2">
                <div class="btn tombol-login-signup">
                  <a href="signup.html"><p class="center">Sign Up</p></a>
                </div>
              </div>
              <div class="col m2">
                <div class="btn tombol-login">
                  <a href="signin.html"><p class="center">Login</p></a>
                </div>
              </div>
            </section>
            <div class="col m1"></div>
            <section id="profile_nav" class="">
              <div class="col m3 s5">
                <a href="">
                  <div class="panel-profile dropdown-trigger" data-target="dropdown1">
                    <img src="img/viceleader.png" alt="" class="responsive-img left">
                    <h3 class="left">Hello, Adi</h3>
                    <i class="small material-icons">arrow_drop_down</i>
                    <ul id='dropdown1' class='dropdown-content'>
                      <li>
                        <a href="" id="first-menu">My Profile <i class="small material-icons">person</i></a>
                      </li>
                      <li>
                        <a href="">Dashboard <i class="small material-icons">dashboard</i></a>
                      </li>
                      <li>
                        <a href="">Logout <i class="small material-icons">power_settings_new</i></a></a>
                      </li>
                    </ul>
                  </div>
                </a>
              </div>
            </section>
          </div>
        </div>

        <h1 class="signup">Sign Up</h1>
      </div>
      
    </div>


    <!-- Sidenav -->
    <ul class="sidenav" id="mobile-nav">
      <li><a href="">Home</a></li>
      <li><a href="">Profile</a></li>
      <li><a href="">News</a></li>
      <li><a href="">Event</a></li>
      <li><a href="">Contact</a></li>
    </ul>

    <!-- Background -->
    <div class="background-signup">
      <div class="container">
        <div class="card-panel signup">
          <div class="row center">
            <div class="col m6 info-left">
              <h2><span>Padi Emas,</span> Connecting <br>You With <span>Other</span></h2>
              <img src="img/people.png" alt=""class="responsive-img" >
              <h3>Sign Up With :</h3>
              <div class="row">
                <div class="g-signin2" data-onsuccess="onSignIn"></div>
              </div>
              <div class="row">
                <a href="sso.html" class="waves-effect waves-light btn tombol-sso-fb"><i class="left"><img src="img/facebook-2.png" alt=""></i>Facebook</a>
              </div>
              <div class="row">
                <a href="sso.html" class="waves-effect waves-light btn tombol-sso-tw"><i class="left"><img src="img/twitter.png" alt=""></i>Twitter</a>
              </div>
              <div class="row">
                <a href="sso.html" class="waves-effect waves-light btn tombol-sso-gg"><i class="left"><img src="img/github-logo.png" alt=""></i>Github</a>
              </div>
            </div>
            <div class="col m6 info-right">
              <h2>Registration Form</h2>
              <form>
                <div class="row row-distance">
                  <div class="input-field col s6">
                    <select id="type_member">
                      <option value="" disabled selected>Choose your option</option>
                      <option value="civilian">Civilian</option>
                      <option value="member">Member</option>
                    </select>
                    <label>Member Type</label>
                  </div>
                  <div class="input-field col s6">
                    <select id="join_period">
                      <option value="" disabled selected>Choose your option</option>
                      <option value="1-month">1 Month</option>
                      <option value="3-month">3 Month</option>
                      <option value="6-month">Half Year (6 Month)</option>
                      <option value="12-month">Year (12 Month)</option>
                    </select>
                    <label>Join Period</label>
                  </div>
                </div>
                <div class="row row-distance">
                  <div class="input-field col s6">
                    <input placeholder="Placeholder" id="first_name" type="text" required class="validate">
                    <label for="first_name">First Name</label>
                  </div>
                  <div class="input-field col s6">
                    <input id="last_name" type="text" required class="validate">
                    <label class="transparent" for="last_name">Last Name</label>
                  </div>
                </div>
                <div class="row row-distance">
                  <div class="input-field col s12">
                    <input id="code_name" type="text" required class="validate">
                    <label for="code_name">Code Name</label>
                  </div>
                </div>
                <div class="row row-distance">
                  <div class="input-field col s12">
                    <input id="address" type="text" class="validate">
                    <label for="address">Address</label>
                  </div>
                </div>
                <div class="row row-distance">
                  <div class="input-field col s6">
                    <input id="dob" type="date" class="validate">
                    <label for="dob">Date of Birth</label>
                  </div>
                  <div class="input-field col s6">
                    <input id="identity_number" type="number" class="validate">
                    <label for="identity_number">NIK/Identity Number</label>
                  </div>
                </div>
                <div class="row row-distance">
                  <div class="file-field input-field">
                    <div class="btn btn-upload">
                      <span>File</span>
                      <input type="file">
                    </div>
                    <div class="file-path-wrapper">
                      <input id="upload_ktp" class="file-path validate" type="text">
                    </div>
                  </div>
                </div>
                <div class="row row-distance">
                  <div class="input-field col s12">
                    <input id="profession" type="text" class="validate">
                    <label for="profession">Profession</label>
                  </div>
                </div>
                <div class="row row-distance">
                  <div class="input-field col s12">
                    <textarea id="skillset" class="materialize-textarea"></textarea>
                    <label for="skillset">Skillset</label>
                  </div>
                </div>
                <div class="row row-distance">
                  <div class="input-field col s12">
                    <input type="tel" id="handphone" class="inputNumber">
                    <span class="right hide" id="correct-msg">Correct</span>
                    <span class="right hide" id="error-msg"></span>
                  </div>
                </div>
                <div class="row row-distance">
                  <div class="input-field col s12">
                    <input id="email" type="email" class="validate">
                    <label for="email">Email</label>
                  </div>
                </div>
                <div class="row row-distance">
                  <div class="input-field col s12">
                    <input id="password" name="password" type="password" class="validate">
                    <label for="password">Password</label>
                    <progress max="100" value="0" id="strength" style="width: 230px; height: 5px;" class="left hide"></progress>
                  </div>
                </div>
                <div class="row row-distance">
                  <div class="input-field col s12">
                    <input id="confirmpassword" name="confirm-password" type="password" class="validate">
                    <label for="confirmpassword">Confirm Password</label>
                  </div>
                </div>
                <button  class="btn tombol-signup">Create Account</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer>
      <h2 class="center">2020 All Rights Reserved by Padi</h2>
    </footer>

    <!--JavaScript at end of body for optimized loading-->
    <script type="text/javascript" src="js/materialize.min.js"></script>
    <script type="text/javascript" src="js/intlTelInput.js"></script>
    <script type="text/javascript" src="js/user.js"></script>
    <script src="https://apis.google.com/js/platform.js" async defer></script>

    <script>
      const sideNav= document.querySelectorAll('.sidenav');
      M.Sidenav.init(sideNav);

      const parallax=document.querySelectorAll('.parallax');
      M.Parallax.init(parallax);

      const materialbox=document.querySelectorAll('.materialboxed');
      M.Materialbox.init(materialbox);

      document.addEventListener('DOMContentLoaded', function() {
        var elems = document.querySelectorAll('select');
        var instances = M.FormSelect.init(elems);
      });

      document.addEventListener('DOMContentLoaded', function() {
        var elems = document.querySelectorAll('.dropdown-trigger');
        var instances = M.Dropdown.init(elems);
      });
    </script>

    <!-- Script for International Input Number -->
    <script>
      const inputTel=document.querySelector('#handphone');
      inputTel.style.width='370px';

      const correctMsg=document.querySelector('#correct-msg');
      correctMsg.style.color='green';
      const errorMsg=document.querySelector('#error-msg');
      errorMsg.style.color='red';
      const errorMap=['Invalid Number', 'Invalid Country Code', 'Too Short', 'Too Long', 'Invalid Number'];

      const iti=window.intlTelInput(inputTel, {
        initialCountry: 'id',
        nationalMode: true,
        utilsScript:'js/utils.js'
      });


      const reset= function(){
        inputTel.classList.remove('error');
        errorMsg.innerHTML='';
        errorMsg.classList.add('hide');
        correctMsg.classList.add('hide');
      }

      inputTel.addEventListener('blur', function(){
        reset();
        if(inputTel.value.trim()){
          if(iti.isValidNumber()){
            correctMsg.classList.remove('hide');
          }else{
            inputTel.classList.add('error');
            let errorCode=iti.getValidationError();
            inputTel.setCustomValidity(errorMap[errorCode]);
            errorMsg.innerHTML=errorMap[errorCode];
            errorMsg.classList.remove('hide');
            inputTel.setCustomValidity(errorMap[errorCode]);
          }
        }
      });

      inputTel.addEventListener('change', reset);
      inputTel.addEventListener('keyup', reset);
  </script>

  <!-- Script for Password Checker -->

  <script>
    const password = document.getElementById("password");
    let strengthBar=document.getElementById('strength');
    password.addEventListener('keyup', function(){
      strengthBar.classList.remove('hide');
      checkPassword(password.value);
    });

    function checkPassword(pass){
      let strength=0;
      if(pass.match(/[a-zA-Z0-9][a-zA-Z0-9]+/)){
        strength += 1;
      }
      if(pass.match(/[~<>?]+/)){
        strength += 1;
      }
      if(pass.match(/[!@$%^&*()]+/)){
        strength += 1;
      }
      if(pass.length > 4){
        strength += 1;
      }
      if(pass.length > 5){
        strength += 1;
      }
      if(pass.length > 6){
        strength += 1;
      }

      switch(strength){
        case 0:
          strengthBar.value=0;
          strengthBar.classList.add('hide');
          password.setCustomValidity('Weak Password!');
          break
        case 1:
          strengthBar.value=20;
          password.setCustomValidity('Weak Password!');
          break
        case 2:
          strengthBar.value=40;
          password.setCustomValidity('Weak Password!');
          break
        case 3:
          strengthBar.value=60;
          password.setCustomValidity('');
          break
        case 4:
          strengthBar.value=80;
          password.setCustomValidity('');
          break
        case 5:
          strengthBar.value=100;
          password.setCustomValidity('');
          break
      }
    }
  </script>

  <!-- Script for Confirm Password -->
  <script>
    const pass = document.getElementById("password")
    ,confirm_password = document.getElementById("confirmpassword");

    function validatePassword(){
      if(pass.value != confirm_password.value) {
        confirm_password.setCustomValidity("Passwords Don't Match");
      } else {
        confirm_password.setCustomValidity('');
      }
    }

    pass.onchange = validatePassword;
    confirm_password.onkeyup = validatePassword;
  </script>

  <!-- Once Access -->
  <script>
    
  </script>

  <!-- Script for Submit -->
  <script>


    const submit = document.getElementsByTagName('button')[0];
    submit.addEventListener('click', function(){
      const typeMember=document.getElementById('type_member').value;
      const joinPeriod=document.getElementById('join_period').value;
      const fName=document.getElementById('first_name').value;
      const lName= document.getElementById('last_name').value;
      const cName= document.getElementById('code_name').value;
      const address= document.getElementById('address').value;
      const dob= document.getElementById('dob').value;
      const nik= document.getElementById('identity_number').value;
      const uploadKTP= document.getElementById('upload_ktp').value;
      const profession= document.getElementById('profession').value;
      const skillset= document.getElementById('skillset').value;
      const phoneNumber= document.getElementById('handphone').value;
      const email= document.getElementById('email').value;
      const password= document.getElementById('password').value;
      new User(typeMember, joinPeriod, fName, lName, cName, address, dob, nik, profession, skillset, phoneNumber, email, password)

    })

    function User(type, period, firstname, lastname, codename, address, dob, nik, profession, skillset, phone, email, password){
      this.type=type;
      this.period=period;
      this.firstname=firstname;
      this.lastname=lastname;
      this.codename=codename;
      this.address=address;
      this.dob=dob;
      this.nik=nik;
      this.profession=profession;
      this.skillset=skillset;
      this.phone=phone;
      this.email=email;
      this.password=password;

      newUser={
        'Type Member' : this.type,
        'Join Period' : this.period,
        'Name' : this.firstname + ' ' + this.lastname,
        'Code Name' : this.codename,
        'Address' : this.address,
        'Date of Birth' : this.dob,
        'NIK' : this.nik,
        'Profession' : this.profession,
        'Skillset' : this.skillset,
        'Phone Number' : this.phone,
        'Email' : this.email,
        'Password' :this.password
      }

      let users=[];
      if(localStorage.getItem('users') === null){
        users=[];
      }else{
        users=JSON.parse(localStorage.getItem('users'));
        users.push(newUser);
      }

      localStorage.setItem('users', JSON.stringify(users));
      M.toast({html: 'Registration Successfull!'})
    }
  </script>

  <script>
    function onSignIn(googleUser) {
    var profile = googleUser.getBasicProfile();
    document.getElementById('first_name').value=profile.getName();
    document.getElementById('email').value=profile.getEmail();
    gapi.auth2.getAuthInstance().signOut();
  }
  </script>

  </body>
</html>